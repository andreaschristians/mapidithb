"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react"),reactDom=require("react-dom");function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var MapContext=react.createContext(null),isBrowser=!("[object process]"===Object.prototype.toString.call(global.process)&&!global.process.browser),mapboxgl=isBrowser?require("mapbox-gl"):null,events=["resize","remove","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading"],events_1=events,diff=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var o=new Set([].concat(_toConsumableArray(Object.keys(e)),_toConsumableArray(Object.keys(t))));return _toConsumableArray(o).reduce(function(o,r){var n=e[r];return n!==t[r]&&o.push([r,n]),o},[])},queryRenderedFeatures=function(e,t,o,r){var n={layers:[t]};if(r){var i=[[o[0]-r,o[1]-r],[o[0]+r,o[1]+r]];return e.queryRenderedFeatures(i,n)}return e.queryRenderedFeatures(o,n)},eventListeners=[["onClick","click"],["onHover","mousemove"],["onEnter","mouseenter"],["onLeave","mouseleave"]],Layer=function(e){function t(t){var o;return _defineProperty(_assertThisInitialized(o=e.call(this,t)||this),"$key",void 0),_defineProperty(_assertThisInitialized(o),"$value",void 0),_defineProperty(_assertThisInitialized(o),"_id",void 0),_defineProperty(_assertThisInitialized(o),"_map",void 0),_defineProperty(_assertThisInitialized(o),"_onClick",void 0),_defineProperty(_assertThisInitialized(o),"_onHover",void 0),_defineProperty(_assertThisInitialized(o),"_onEnter",void 0),_defineProperty(_assertThisInitialized(o),"_onLeave",void 0),_defineProperty(_assertThisInitialized(o),"_onClick",function(e){var t=[e.point.x,e.point.y],r=queryRenderedFeatures(o._map,o._id,t,o.props.radius);o.props.onClick(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(o),"_onHover",function(e){var t=[e.point.x,e.point.y],r=queryRenderedFeatures(o._map,o._id,t,o.props.radius);o.props.onHover(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(o),"_onEnter",function(e){var t=[e.point.x,e.point.y],r=queryRenderedFeatures(o._map,o._id,t,o.props.radius);o.props.onEnter(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(o),"_onLeave",function(e){var t=[e.point.x,e.point.y],r=queryRenderedFeatures(o._map,o._id,t,o.props.radius);o.props.onLeave(_extends({},e,{features:r}))}),o._id=t.id,o}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.before,r=(t.radius,t.onClick),n=t.onHover,i=t.onEnter,a=t.onLeave,s=_objectWithoutPropertiesLoose(t,["before","radius","onClick","onHover","onEnter","onLeave"]);o&&e.getLayer(o)?e.addLayer(s,o):e.addLayer(s),r&&e.on("click",this._id,this._onClick),n&&e.on("mousemove",this._id,this._onHover),i&&e.on("mouseenter",this._id,this._onEnter),a&&e.on("mouseleave",this._id,this._onLeave)},o.componentDidUpdate=function(e){var t=this,o=this._map,r=this.props,n=r.before,i=(r.onClick,_objectWithoutPropertiesLoose(r,["before","onClick"]));n!==e.before&&o.moveLayer(i.id,n),i.paint!==e.paint&&diff(i.paint,e.paint).forEach(function(e){var r=e[0],n=e[1];o.setPaintProperty(t._id,r,n)}),i.layout!==e.layout&&diff(i.layout,e.layout).forEach(function(e){var r=e[0],n=e[1];o.setLayoutProperty(t._id,r,n)}),i.filter!==e.filter&&(i.filter?o.setFilter(this._id,i.filter):o.setFilter(this._id,void 0)),eventListeners.forEach(function(r){var n=r[0],i=r[1],a="_"+n;!t.props[n]&&e[n]&&o.off(i,t._id,t[a]),t.props[n]&&!e[n]&&o.on(i,t._id,t[a])})},o.componentWillUnmount=function(){var e=this;this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&(eventListeners.forEach(function(t){var o=t[0],r=t[1],n="_"+o;e.props[o]&&e._map.off(r,e._id,e[n])}),this._map.removeLayer(this._id))},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(Layer,"displayName","Layer"),_defineProperty(Layer,"defaultProps",{radius:0});var CustomLayer=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_id",void 0),_defineProperty(_assertThisInitialized(t),"_map",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props,t=e.layer,o=e.before;o&&this._map.getLayer(o)?this._map.addLayer(t,o):this._map.addLayer(t),this._id=t.id},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&this._map.removeLayer(this._id)},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(CustomLayer,"displayName","CustomLayer");var getLayerId=function(e){return e.type===CustomLayer?e.props.layer.id:e.props.id},normalizeChildren=function(e){return react.Children.toArray(e).filter(Boolean).reduce(function(e,t,o){var r=e.previousLayerIndex;if(t.type===Layer||t.type===CustomLayer){if(r){var n=getLayerId(t),i=e.children[r],a=i.props.before||n,s=react.cloneElement(i,{before:a});e.children[r]=s}e.previousLayerIndex=o}return e.children.push(t),e},{children:[],previousLayerIndex:void 0}).children};function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}var capitalizeFirstLetter_1=capitalizeFirstLetter,jumpTo="jumpTo",easeTo="easeTo",flyTo="flyTo",MapGL=function(e){function t(t){var o;return _defineProperty(_assertThisInitialized(o=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(o),"_container",void 0),_defineProperty(_assertThisInitialized(o),"_onViewportChange",void 0),_defineProperty(_assertThisInitialized(o),"state",{loaded:!1}),_defineProperty(_assertThisInitialized(o),"_onViewportChange",function(e){if(e.originalEvent){var t=o._map,r=t.getCenter(),n=r.lng,i={latitude:r.lat,longitude:n,zoom:t.getZoom(),pitch:t.getPitch(),bearing:t.getBearing()};o.props.onViewportChange(i)}}),mapboxgl&&(mapboxgl.accessToken=t.accessToken),o._container=react.createRef(),o}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this;if(mapboxgl){var t=this._container.current,o=new mapboxgl.Map({container:t,style:this.props.mapStyle,interactive:!!this.props.onViewportChange,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,pitch:this.props.pitch,bearing:this.props.bearing,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,hash:this.props.hash,bearingSnap:this.props.bearingSnap,pitchWithRotate:this.props.pitchWithRotate,attributionControl:this.props.attributionControl,logoPosition:this.props.logoPosition,failIfMajorPerformanceCaveat:this.props.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.props.preserveDrawingBuffer,refreshExpiredTiles:this.props.refreshExpiredTiles,maxBounds:this.props.maxBounds,scrollZoom:this.props.scrollZoom,boxZoom:this.props.boxZoom,dragRotate:this.props.dragRotate,dragPan:this.props.dragPan,keyboard:this.props.keyboard,doubleClickZoom:this.props.doubleClickZoom,trackResize:this.props.trackResize,renderWorldCopies:this.props.renderWorldCopies,maxTileCacheSize:this.props.maxTileCacheSize,localIdeographFontFamily:this.props.localIdeographFontFamily,transformRequest:this.props.transformRequest,collectResourceTiming:this.props.collectResourceTiming});this._map=o,o.on("styledata",function(){return e.setState({loaded:!0})}),o.once("load",function(){e.setState({loaded:!0},e.props.onLoad)}),this.props.onViewportChange&&(o.on("dragend",this._onViewportChange),o.on("zoomend",this._onViewportChange),o.on("rotateend",this._onViewportChange),o.on("pitchend",this._onViewportChange),o.on("boxzoomend",this._onViewportChange)),events_1.forEach(function(t){var r="on"+capitalizeFirstLetter_1(t);e.props[r]&&o.on(t,e.props[r])}),this.props.cursorStyle&&(o.getCanvas().style.cursor=this.props.cursorStyle)}},o.componentDidUpdate=function(e){this._updateMapViewport(e,this.props),this._updateMapStyle(e,this.props),!e.cursorStyle!==this.props.cursorStyle&&(this._map.getCanvas().style.cursor=this.props.cursorStyle)},o.componentWillUnmount=function(){this._map&&this._map.remove()},o.getMap=function(){return this._map},o._updateMapStyle=function(e,t){var o=this,r=t.mapStyle,n=e.mapStyle;r!==n&&this.setState({loaded:!1},function(){return o._map.setStyle(r)})},o._updateMapViewport=function(e,t){var o=this._map,r=o.getCenter();if(t.latitude!==e.latitude&&t.latitude!==r.lat||t.longitude!==e.longitude&&t.longitude!==r.lng||t.zoom!==e.zoom&&t.zoom!==o.getZoom()||t.pitch!==e.pitch&&t.pitch!==o.getPitch()||t.bearing!==e.bearing&&t.bearing!==o.getBearing()){var n={center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing},i=this.props,a=i.viewportChangeMethod,s=_extends({},i.viewportChangeOptions,n);switch(a){case flyTo:o.flyTo(s);break;case jumpTo:o.jumpTo(s);break;case easeTo:o.easeTo(s);break;default:throw new Error("Unknown viewport change method")}}},o.render=function(){var e=this.state.loaded,t=this.props,o=t.className,r=t.style,n=this.props.children?normalizeChildren(this.props.children):null;return react.createElement(MapContext.Provider,{value:this._map},react.createElement("div",{ref:this._container,style:r,className:o},e&&n))},t}(react.PureComponent);_defineProperty(MapGL,"displayName","MapGL"),_defineProperty(MapGL,"defaultProps",{children:null,className:null,style:null,mapStyle:"mapbox://styles/mapbox/light-v8",accessToken:null,bearing:0,pitch:0,minZoom:0,maxZoom:22,maxBounds:null,hash:!1,bearingSnap:7,pitchWithRotate:!0,attributionControl:!0,logoPosition:"bottom-left",failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,boxZoom:!0,scrollZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,trackResize:!0,renderWorldCopies:!0,maxTileCacheSize:null,onViewportChange:null,onLoad:null,localIdeographFontFamily:null,transformRequest:null,collectResourceTiming:!1,cursorStyle:null,viewportChangeMethod:jumpTo,viewportChangeOptions:null});var validateSource=function(e){switch(e.type){case"vector":return _extends({type:"vector"},e);case"raster":return _extends({type:"raster"},e);case"raster-dem":return _extends({type:"raster-dem"},e);case"geojson":return _extends({type:"geojson"},e);case"video":return _extends({type:"video"},e);case"image":return _extends({type:"image"},e);default:throw new Error("Unknown type for '"+e.id+"' Source")}},Source=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"state",{loaded:!1}),_defineProperty(_assertThisInitialized(t),"_onSourceData",function(){t._map.isSourceLoaded(t.props.id)&&(t._map.off("sourcedata",t._onSourceData),t.setState({loaded:!0}))}),_defineProperty(_assertThisInitialized(t),"_updateGeoJSONSource",function(e,o,r){r.data!==o.data&&t._map.getSource(e).setData(r.data)}),_defineProperty(_assertThisInitialized(t),"_updateVectorSource",function(e,o,r){var n=t._map.getSource(e);n._tileJSONRequest&&n._tileJSONRequest.cancel(),n.url=r.url,n.scheme=r.scheme,n._options=_extends({},n._options,r);var i=t._map.style.sourceCaches[e];i&&i.clearTiles(),n.load()}),_defineProperty(_assertThisInitialized(t),"_removeSource",function(){var e=t.props.id;if(t._map.getSource(e)){var o=t._map.getStyle().layers;o&&o.forEach(function(o){o.source===e&&t._map.removeLayer(o.id)}),t._map.removeSource(e)}}),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=validateSource(this.props),t=e.id,o=(e.children,_objectWithoutPropertiesLoose(e,["id","children"]));this._map.addSource(t,o),this._map.on("sourcedata",this._onSourceData)},o.componentDidUpdate=function(e){var t=validateSource(e),o=t.id,r=(t.children,_objectWithoutPropertiesLoose(t,["id","children"])),n=validateSource(this.props),i=n.id,a=(n.children,_objectWithoutPropertiesLoose(n,["id","children"]));if(i!==o||a.type!==r.type)return this._map.removeSource(o),void this._map.addSource(i,a);"geojson"!==a.type||"geojson"!==r.type?"vector"===a.type&&"vector"===r.type&&this._updateVectorSource(i,r,a):this._updateGeoJSONSource(i,r,a)},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._removeSource()},o.render=function(){var e=this,t=this.state.loaded,o=this.props.children?normalizeChildren(this.props.children):null;return react.createElement(MapContext.Consumer,{},function(r){return r&&(e._map=r),t&&o})},t}(react.PureComponent);_defineProperty(Source,"displayName","Source");var Popup=function(e){function t(t){var o;return _defineProperty(_assertThisInitialized(o=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(o),"_el",void 0),_defineProperty(_assertThisInitialized(o),"_popup",void 0),o._el=document.createElement("div"),o}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props,t=e.longitude,o=e.latitude,r=e.offset,n=e.closeButton,i=e.closeOnClick,a=e.onClose,s=e.anchor;this._popup=new mapboxgl.Popup({offset:r,closeButton:n,closeOnClick:i,anchor:s}),this._popup.setDOMContent(this._el),this._popup.setLngLat([t,o]).addTo(this._map),a&&this._popup.on("close",a)},o.componentDidUpdate=function(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&this._popup.setLngLat([this.props.longitude,this.props.latitude])},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._popup.remove()},o.getPopup=function(){return this._popup},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),reactDom.createPortal(e.props.children,e._el)})},t}(react.PureComponent);_defineProperty(Popup,"displayName","Popup"),_defineProperty(Popup,"defaultProps",{closeButton:!0,closeOnClick:!0,onClose:null,anchor:null,offset:null});var Marker=function(e){function t(t){var o;return _defineProperty(_assertThisInitialized(o=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(o),"_el",void 0),_defineProperty(_assertThisInitialized(o),"_marker",void 0),_defineProperty(_assertThisInitialized(o),"_onDragEnd",function(){o.props.onDragEnd(o._marker.getLngLat())}),_defineProperty(_assertThisInitialized(o),"_onDragStart",function(){o.props.onDragStart(o._marker.getLngLat())}),_defineProperty(_assertThisInitialized(o),"_onDrag",function(){o.props.onDrag(o._marker.getLngLat())}),o._el=document.createElement("div"),o}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props,t=e.longitude,o=e.latitude,r=e.offset,n=e.draggable,i=e.onDragEnd,a=e.onDragStart,s=e.onDrag;this._marker=new mapboxgl.Marker(this._el,{draggable:n,offset:r}),this._marker.setLngLat([t,o]).addTo(this._map),i&&this._marker.on("dragend",this._onDragEnd),a&&this._marker.on("dragstart",this._onDragStart),s&&this._marker.on("drag",this._onDrag)},o.componentDidUpdate=function(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&this._marker.setLngLat([this.props.longitude,this.props.latitude])},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._marker.remove()},o.getMarker=function(){return this._marker},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),reactDom.createPortal(e.props.children,e._el)})},t}(react.PureComponent);_defineProperty(Marker,"displayName","Marker"),_defineProperty(Marker,"defaultProps",{offset:null,draggable:!1});var FeatureState=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.id,r=t.source,n=t.sourceLayer,i=t.state;e.setFeatureState({id:o,source:r,sourceLayer:n},i)},o.componentDidUpdate=function(e){var t=this._map,o=this.props,r=o.id,n=o.source,i=o.sourceLayer,a=o.state;r===e.id&&n===e.source&&i===e.sourceLayer&&a===e.state||(t.removeFeatureState({id:e.id,source:e.source,sourceLayer:e.sourceLayer}),t.setFeatureState({id:r,source:n,sourceLayer:i},a))},o.componentWillUnmount=function(){if(this._map&&this._map.getStyle()){var e=this.props,t=e.id,o=e.source,r=e.sourceLayer;this._map.removeFeatureState({id:t,source:o,sourceLayer:r})}},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent),AttributionControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.compact,r=t.customAttribution,n=t.position,i=new mapboxgl.AttributionControl({compact:o,customAttribution:r});e.addControl(i,n),this._control=i},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(AttributionControl,"defaultProps",{position:"bottom-right"});var FullscreenControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.container,r=t.position,n=new mapboxgl.FullscreenControl({container:o});e.addControl(n,r),this._control=n},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(FullscreenControl,"defaultProps",{position:"top-right"});var GeolocateControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.positionOptions,r=t.fitBoundsOptions,n=t.trackUserLocation,i=t.showUserLocation,a=t.position,s=t.onTrackUserLocationEnd,p=t.onTrackUserLocationStart,l=t.onError,u=t.onGeolocate,c=new mapboxgl.GeolocateControl({positionOptions:o,fitBoundsOptions:r,trackUserLocation:n,showUserLocation:i});s&&c.on("trackuserlocationend",s),p&&c.on("trackuserlocationstart",p),l&&c.on("error",l),u&&c.on("geolocate",u),e.addControl(c,a),this._control=c},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(GeolocateControl,"defaultProps",{positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0});var NavigationControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.showCompass,r=t.showZoom,n=t.position,i=new mapboxgl.NavigationControl({showCompass:o,showZoom:r});e.addControl(i,n),this._control=i},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(NavigationControl,"defaultProps",{position:"top-right"});var ScaleControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.maxWidth,r=t.unit,n=t.position,i=new mapboxgl.ScaleControl({maxWidth:o,unit:r});e.addControl(i,n),this._control=i},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}_defineProperty(ScaleControl,"defaultProps",{position:"bottom-right",unit:"metric"});var mapboxGlLanguage=createCommonjsModule(function(e){function t(e){if(e=Object.assign({},e),!(this instanceof t))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=e.defaultLanguage,this._isLanguageField=e.languageField||/^\{name/,this._getLanguageField=e.getLanguageField||function(e){return"mul"===e?"{name}":"{name_"+e+"}"},this._languageSource=e.languageSource||null,this._languageTransform=e.languageTransform||function(e,t){return"ar"===t?function(e){var t=e.layers.map(function(e){if(!(e.layout||{})["text-field"])return e;return Object.assign({},e,{layout:Object.assign({},e.layout,{"text-letter-spacing":0})})});return Object.assign({},e,{layers:t})}(e):function(e){var t=e.layers.map(function(e){if(!(e.layout||{})["text-field"])return e;var t=0;return"state_label"===e["source-layer"]&&(t=.15),"marine_label"===e["source-layer"]&&(/-lg/.test(e.id)&&(t=.25),/-md/.test(e.id)&&(t=.15),/-sm/.test(e.id)&&(t=.1)),"place_label"===e["source-layer"]&&(/-suburb/.test(e.id)&&(t=.15),/-neighbour/.test(e.id)&&(t=.1),/-islet/.test(e.id)&&(t=.01)),"airport_label"===e["source-layer"]&&(t=.01),"rail_station_label"===e["source-layer"]&&(t=.01),"poi_label"===e["source-layer"]&&/-scalerank/.test(e.id)&&(t=.01),"road_label"===e["source-layer"]&&(/-label-/.test(e.id)&&(t=.01),/-shields/.test(e.id)&&(t=.05)),Object.assign({},e,{layout:Object.assign({},e.layout,{"text-letter-spacing":t})})});return Object.assign({},e,{layers:t})}(e)},this._excludedLayerIds=e.excludedLayerIds||[],this.supportedLanguages=e.supportedLanguages||["ar","en","es","fr","de","ja","ko","mul","pt","ru","zh"]}function o(e,t,o){if(function(e,t){return"string"==typeof t&&e.test(t)}(e,t))return o;if(function(e,t){return t.stops&&t.stops.filter(function(t){return e.test(t[1])}).length>0}(e,t)){var r=t.stops.map(function(t){return e.test(t[1])?[t[0],o]:t});return Object.assign({},t,{stops:r})}return t}t.prototype.setLanguage=function(e,t){if(this.supportedLanguages.indexOf(t)<0)throw new Error("Language "+t+" is not supported");var r=this._languageSource||function(e){return Object.keys(e.sources).filter(function(t){var o=e.sources[t];return/mapbox-streets-v\d/.test(o.url)})[0]}(e);if(!r)return e;var n=this._getLanguageField(t),i=this._isLanguageField,a=this._excludedLayerIds,s=e.layers.map(function(e){return e.source===r?function(e,t,r,n){return t.layout&&t.layout["text-field"]&&-1===n.indexOf(t.id)?Object.assign({},t,{layout:Object.assign({},t.layout,{"text-field":o(e,t.layout["text-field"],r)})}):t}(i,e,n,a):e}),p=Object.assign({},e,{layers:s});return this._languageTransform(p,t)},t.prototype._initialStyleUpdate=function(){var e=this._map.getStyle(),t=this._defaultLanguage||function(e){var t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,o=t.split("-"),r=t;o.length>1&&(r=o[0]);if(e.indexOf(r)>-1)return r;return null}(this.supportedLanguages);this._map.off("styledata",this._initialStyleUpdate),this._map.setStyle(this.setLanguage(e,t))},t.prototype.onAdd=function(e){return this._map=e,this._map.on("styledata",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},t.prototype.onRemove=function(){this._map.off("styledata",this._initialStyleUpdate),this._map=void 0},e.exports=t}),LanguageControl=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),_defineProperty(_assertThisInitialized(t),"_setLanguage",function(){var e=t.props.language,o=t._map,r=t._control;e&&o.setStyle(r.setLanguage(o.getStyle(),e))}),t}_inheritsLoose(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this._map,t=this.props,o=t.supportedLanguages,r=t.languageTransform,n=t.languageField,i=t.getLanguageField,a=t.languageSource,s=t.defaultLanguage,p=new mapboxGlLanguage({supportedLanguages:o,languageTransform:r,languageField:n,getLanguageField:i,languageSource:a,defaultLanguage:s});e.addControl(p),this._control=p},o.componentDidUpdate=function(e){e.language!==this.props.language&&this._setLanguage()},o.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},o.getControl=function(){return this._control},o.render=function(){var e=this;return react.createElement(MapContext.Consumer,{},function(t){return t&&(e._map=t),null})},t}(react.PureComponent);_defineProperty(LanguageControl,"defaultProps",{}),exports.AttributionControl=AttributionControl,exports.CustomLayer=CustomLayer,exports.FeatureState=FeatureState,exports.FullscreenControl=FullscreenControl,exports.GeolocateControl=GeolocateControl,exports.LanguageControl=LanguageControl,exports.Layer=Layer,exports.MapContext=MapContext,exports.Marker=Marker,exports.NavigationControl=NavigationControl,exports.Popup=Popup,exports.ScaleControl=ScaleControl,exports.Source=Source,exports.default=MapGL;
//# sourceMappingURL=react-map-gl.cjs.js.map
