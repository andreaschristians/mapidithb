{"version":3,"file":"react-map-gl.esm.js","sources":["../src/components/MapContext/index.js","../src/utils/mapbox-gl.js","../src/components/MapGL/events.js","../src/utils/diff.js","../src/utils/queryRenderedFeatures.js","../src/components/Layer/index.js","../src/components/CustomLayer/index.js","../src/utils/normalizeChildren.js","../src/utils/capitalizeFirstLetter.js","../src/components/MapGL/index.js","../src/utils/validateSource.js","../src/components/Source/index.js","../src/components/Popup/index.js","../src/components/Marker/index.js","../src/components/FeatureState/index.js","../src/components/AttributionControl/index.js","../src/components/FullscreenControl/index.js","../src/components/GeolocateControl/index.js","../src/components/NavigationControl/index.js","../src/components/ScaleControl/index.js","../node_modules/@mapbox/mapbox-gl-language/index.js","../src/components/LanguageControl/index.js"],"sourcesContent":["// @flow\n\nimport { createContext } from 'react';\nimport type { Context } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\n\nconst MapContext: Context<?MapboxMap> = createContext(null);\n\nexport default MapContext;\n","// @flow\nimport type MapboxGL from 'mapbox-gl/src/index';\n\nconst isBrowser = !(\n  Object.prototype.toString.call(global.process) === '[object process]' &&\n  !global.process.browser\n);\n\n// $FlowFixMe\nconst mapboxgl: MapboxGL = isBrowser ? require('mapbox-gl') : null;\n\nexport default mapboxgl;\n","// @flow\n\nconst events = [\n  'resize',\n  'remove',\n  'mousedown',\n  'mouseup',\n  'mouseover',\n  'mousemove',\n  'click',\n  'dblclick',\n  'mouseenter',\n  'mouseleave',\n  'mouseout',\n  'contextmenu',\n  'touchstart',\n  'touchend',\n  'touchmove',\n  'touchcancel',\n  'movestart',\n  'move',\n  'moveend',\n  'dragstart',\n  'drag',\n  'dragend',\n  'zoomstart',\n  'zoom',\n  'zoomend',\n  'rotatestart',\n  'rotate',\n  'rotateend',\n  'pitchstart',\n  'pitch',\n  'pitchend',\n  'boxzoomstart',\n  'boxzoomend',\n  'boxzoomcancel',\n  'webglcontextlost',\n  'webglcontextrestored',\n  'load',\n  'error',\n  'data',\n  'styledata',\n  'sourcedata',\n  'dataloading',\n  'styledataloading',\n  'sourcedataloading'\n];\n\nmodule.exports = events;\n","// @flow\n\ntype KV = {\n  [string]: any\n};\n\nconst diff = (newProps: KV = {}, prevProps: KV = {}) => {\n  const keys = new Set([...Object.keys(newProps), ...Object.keys(prevProps)]);\n  return [...keys].reduce((acc, key: string) => {\n    const value = newProps[key];\n    if (value !== prevProps[key]) {\n      acc.push([key, value]);\n    }\n    return acc;\n  }, []);\n};\n\nexport default diff;\n","// @flow\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\n\nconst queryRenderedFeatures = (\n  map: MapboxMap,\n  layerId: string,\n  position: [number, number],\n  radius: number\n) => {\n  const parameters = { layers: [layerId] };\n\n  if (radius) {\n    const bbox = [\n      [position[0] - radius, position[1] - radius],\n      [position[0] + radius, position[1] + radius]\n    ];\n\n    return map.queryRenderedFeatures(bbox, parameters);\n  }\n\n  return map.queryRenderedFeatures(position, parameters);\n};\n\nexport default queryRenderedFeatures;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type { LayerSpecification } from 'mapbox-gl/src/style-spec/types';\nimport type { MapMouseEvent, MapTouchEvent } from 'mapbox-gl/src/ui/events';\n\nimport MapContext from '../MapContext';\nimport diff from '../../utils/diff';\nimport queryRenderedFeatures from '../../utils/queryRenderedFeatures';\n\nconst eventListeners = [\n  ['onClick', 'click'],\n  ['onHover', 'mousemove'],\n  ['onEnter', 'mouseenter'],\n  ['onLeave', 'mouseleave']\n];\n\ntype Props = {|\n  /** Mapbox GL Layer id */\n  id: string,\n\n  /** The id of an existing layer to insert the new layer before. */\n  before?: string,\n\n  /**\n   * Called when the layer is clicked.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer,\n   * using Mapbox's queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onClick?: (event: { features?: [], ...MapMouseEvent }) => any,\n\n  /**\n   * Called when the layer is hovered over.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer,\n   * using Mapbox's queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onHover?: (event: { features?: [], ...MapMouseEvent }) => any,\n\n  /**\n   * Called when the layer feature is entered.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer,\n   * using Mapbox's queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onEnter?: (event: { features?: [], ...MapMouseEvent }) => any,\n\n  /**\n   * Called when the layer feature is leaved.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer,\n   * using Mapbox's queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onLeave?: (event: { features?: [], ...MapMouseEvent }) => any,\n\n  /**\n   * Radius to detect features around a clicked/hovered point\n   */\n  radius: number,\n\n  ...LayerSpecification\n|};\n\nclass Layer extends PureComponent<Props> {\n  $key: string;\n\n  $value: any;\n\n  _id: string;\n\n  _map: MapboxMap;\n\n  _onClick: (event: MapMouseEvent | MapTouchEvent) => void;\n\n  _onHover: (event: MapMouseEvent) => void;\n\n  _onEnter: (event: MapMouseEvent) => void;\n\n  _onLeave: (event: MapMouseEvent) => void;\n\n  static displayName = 'Layer';\n\n  static defaultProps = {\n    radius: 0\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this._id = props.id;\n  }\n\n  componentDidMount() {\n    const map = this._map;\n    const {\n      before,\n      radius,\n      onClick,\n      onHover,\n      onEnter,\n      onLeave,\n      ...layer\n    } = this.props;\n\n    if (before && map.getLayer(before)) {\n      map.addLayer(layer, before);\n    } else {\n      map.addLayer(layer);\n    }\n\n    if (onClick) {\n      map.on('click', this._id, this._onClick);\n    }\n\n    if (onHover) {\n      map.on('mousemove', this._id, this._onHover);\n    }\n\n    if (onEnter) {\n      map.on('mouseenter', this._id, this._onEnter);\n    }\n\n    if (onLeave) {\n      map.on('mouseleave', this._id, this._onLeave);\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const map = this._map;\n    const { before, onClick, ...layer } = this.props;\n\n    if (before !== prevProps.before) {\n      map.moveLayer(layer.id, before);\n    }\n\n    if (layer.paint !== prevProps.paint) {\n      diff(layer.paint, prevProps.paint).forEach(([key, value]) => {\n        map.setPaintProperty(this._id, key, value);\n      });\n    }\n\n    if (layer.layout !== prevProps.layout) {\n      diff(layer.layout, prevProps.layout).forEach(([key, value]) => {\n        map.setLayoutProperty(this._id, key, value);\n      });\n    }\n\n    // $FlowFixMe\n    if (layer.filter !== prevProps.filter) {\n      if (!layer.filter) {\n        map.setFilter(this._id, undefined);\n      } else {\n        map.setFilter(this._id, layer.filter);\n      }\n    }\n\n    eventListeners.forEach(([propName, eventName]) => {\n      const handlerName = `_${propName}`;\n\n      if (!this.props[propName] && prevProps[propName]) {\n        map.off(eventName, this._id, this[handlerName]);\n      }\n\n      if (this.props[propName] && !prevProps[propName]) {\n        map.on(eventName, this._id, this[handlerName]);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle() || !this._map.getLayer(this._id)) {\n      return;\n    }\n\n    eventListeners.forEach(([propName, eventName]) => {\n      const handlerName = `_${propName}`;\n      if (this.props[propName]) {\n        this._map.off(eventName, this._id, this[handlerName]);\n      }\n    });\n\n    this._map.removeLayer(this._id);\n  }\n\n  _onClick = (event: MapMouseEvent): void => {\n    const position = [event.point.x, event.point.y];\n    const features = queryRenderedFeatures(\n      this._map,\n      this._id,\n      position,\n      this.props.radius\n    );\n\n    // $FlowFixMe\n    this.props.onClick({ ...event, features });\n  };\n\n  _onHover = (event: MapMouseEvent): void => {\n    const position = [event.point.x, event.point.y];\n    const features = queryRenderedFeatures(\n      this._map,\n      this._id,\n      position,\n      this.props.radius\n    );\n\n    // $FlowFixMe\n    this.props.onHover({ ...event, features });\n  };\n\n  _onEnter = (event: MapMouseEvent): void => {\n    const position = [event.point.x, event.point.y];\n    const features = queryRenderedFeatures(\n      this._map,\n      this._id,\n      position,\n      this.props.radius\n    );\n\n    // $FlowFixMe\n    this.props.onEnter({ ...event, features });\n  };\n\n  _onLeave = (event: MapMouseEvent) => {\n    const position: [number, number] = [event.point.x, event.point.y];\n    const features = queryRenderedFeatures(\n      this._map,\n      this._id,\n      position,\n      this.props.radius\n    );\n\n    // $FlowFixMe\n    this.props.onLeave({ ...event, features });\n  };\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return null;\n    });\n  }\n}\n\nexport default Layer;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type { CustomLayerInterface } from 'mapbox-gl/src/style/style_layer/custom_style_layer';\n\nimport MapContext from '../MapContext';\n\ntype Props = {\n  /** The id of an existing layer to insert the new layer before. */\n  before?: string,\n\n  /** Mapbox GL Custom Layer instance */\n  layer: CustomLayerInterface\n};\n\n/**\n * Custom layers allow a user to render directly into the map's GL context\n * using the map's camera.\n */\nclass CustomLayer extends PureComponent<Props> {\n  _id: string;\n\n  _map: MapboxMap;\n\n  static displayName = 'CustomLayer';\n\n  componentDidMount() {\n    const { layer, before } = this.props;\n\n    if (before && this._map.getLayer(before)) {\n      this._map.addLayer(layer, before);\n    } else {\n      this._map.addLayer(layer);\n    }\n\n    this._id = layer.id;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle() || !this._map.getLayer(this._id)) {\n      return;\n    }\n\n    this._map.removeLayer(this._id);\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return null;\n    });\n  }\n}\n\nexport default CustomLayer;\n","// @flow\n\nimport { Children, cloneElement } from 'react';\nimport type { Node, Element } from 'react';\n\nimport Layer from '../components/Layer';\nimport CustomLayer from '../components/CustomLayer';\n\nconst getLayerId = (child: Element<typeof Layer | typeof CustomLayer>) => {\n  // $FlowFixMe\n  return child.type === CustomLayer ? child.props.layer.id : child.props.id;\n};\n\nconst normalizeChildren = (children: Node) => {\n  const results = Children.toArray(children)\n    .filter(Boolean)\n    .reduce(\n      (acc, child, index) => {\n        const { previousLayerIndex } = acc;\n\n        if (child.type === Layer || child.type === CustomLayer) {\n          if (previousLayerIndex) {\n            const currentLayerId = getLayerId(child);\n            const previousLayer = acc.children[previousLayerIndex];\n            const before = previousLayer.props.before || currentLayerId;\n            const previousLayerWithBefore = cloneElement(previousLayer, {\n              before\n            });\n\n            acc.children[previousLayerIndex] = previousLayerWithBefore;\n          }\n\n          acc.previousLayerIndex = index;\n        }\n\n        acc.children.push(child);\n        return acc;\n      },\n      { children: [], previousLayerIndex: undefined }\n    );\n\n  return results.children;\n};\n\nexport default normalizeChildren;\n","// @flow\n\nfunction capitalizeFirstLetter(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nmodule.exports = capitalizeFirstLetter;\n","// @flow\n\nimport { PureComponent, createElement, createRef } from 'react';\nimport type { Node, ElementRef } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxLngLatBoundsLike from 'mapbox-gl/src/geo/lng_lat_bounds';\nimport type { AnimationOptions } from 'mapbox-gl/src/ui/camera';\nimport type { StyleSpecification } from 'mapbox-gl/src/style-spec/types';\nimport type { MapMouseEvent, MapTouchEvent } from 'mapbox-gl/src/ui/events';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\nimport events from './events';\nimport normalizeChildren from '../../utils/normalizeChildren';\nimport capitalizeFirstLetter from '../../utils/capitalizeFirstLetter';\nimport type { EventProps } from './eventProps';\n\nexport type Viewport = {|\n  latitude: number,\n  longitude: number,\n  zoom: number,\n  pitch?: number,\n  bearing?: number\n|};\n\nexport const jumpTo = 'jumpTo';\nexport const easeTo = 'easeTo';\nexport const flyTo = 'flyTo';\n\nexport type ViewportChangeMethod = 'jumpTo' | 'easeTo' | 'flyTo';\nexport type ViewportChangeEvent = MapMouseEvent | MapTouchEvent;\n\ntype Props = EventProps & {\n  /** container className */\n  className?: string,\n\n  /** container style */\n  style?: Object,\n\n  /**\n   * The Mapbox style. A string url or a Mapbox GL style object.\n   */\n  mapStyle: string | StyleSpecification,\n\n  /** Sources and Layers */\n  children?: Node,\n\n  /**\n   * Mapbox API access token for mapbox-gl-js.\n   * Required when using Mapbox vector tiles/styles.\n   */\n  accessToken?: string,\n\n  /** The longitude of the center of the map. */\n  longitude: number,\n\n  /** The latitude of the center of the map. */\n  latitude: number,\n\n  /** The tile zoom level of the map. */\n  zoom: number,\n\n  /** Specify the bearing of the viewport */\n  bearing?: number,\n\n  /** Specify the pitch of the viewport */\n  pitch?: number,\n\n  /** The minimum zoom level of the map (0-22). */\n  minZoom?: number,\n\n  /** The maximum zoom level of the map (0-22). */\n  maxZoom?: number,\n\n  /**\n   * If `true`, the map's position (zoom, center latitude,\n   * center longitude, bearing, and pitch) will be synced\n   * with the hash fragment of the page's URL. For example,\n   * http://path/to/my/page.html#2.59/39.26/53.07/-24.1/60.\n   */\n  hash?: boolean,\n\n  /**\n   * The threshold, measured in degrees, that determines when\n   * the map's bearing (rotation) will snap to north. For\n   * example, with a  bearingSnap of 7, if the user rotates the\n   * map within 7 degrees of north, the map will automatically\n   * snap to exact north.\n   */\n  bearingSnap?: number,\n\n  /**\n   * If `false`, the map's pitch (tilt) control with \"drag to\n   * rotate\" interaction will be disabled.\n   */\n  pitchWithRotate?: boolean,\n\n  /** If `true`, an AttributionControl will be added to the map. */\n  attributionControl?: boolean,\n\n  /* A string representing the position of the Mapbox wordmark on the map. */\n  logoPosition?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right',\n\n  /**\n   * If `true`, map creation will fail if the performance of Mapbox\n   * GL JS would be dramatically worse than expected (i.e. a software\n   * renderer would be used).\n   */\n  failIfMajorPerformanceCaveat?: boolean,\n\n  /**\n   * Mapbox WebGL context creation option.\n   * Useful when you want to export the canvas as a PNG.\n   */\n  preserveDrawingBuffer?: boolean,\n\n  /**\n   * If `false`, the map won't attempt to re-request tiles once they\n   * expire per their HTTP `cacheControl`/`expires` headers.\n   */\n  refreshExpiredTiles?: boolean,\n\n  /** If set, the map will be constrained to the given bounds. */\n  maxBounds?: MapboxLngLatBoundsLike,\n\n  /** If `true`, the \"scroll to zoom\" interaction is enabled. */\n  scrollZoom?: boolean | Object,\n\n  /** If `true`, the \"box zoom\" interaction is enabled */\n  boxZoom?: boolean,\n\n  /** If `true`, the \"drag to rotate\" interaction is enabled */\n  dragRotate?: boolean,\n\n  /** If `true`, the \"drag to pan\" interaction is enabled */\n  dragPan?: boolean,\n\n  /** If `true`, keyboard shortcuts are enabled */\n  keyboard?: boolean,\n\n  /** If `true`, the \"double click to zoom\" interaction is enabled */\n  doubleClickZoom?: boolean,\n\n  /**\n   * If `true`, the map will automatically resize\n   * when the browser window resizes.\n   */\n  trackResize?: boolean,\n\n  /**\n   * The maxiumum number of tiles stored in the tile cache for a given\n   * source. If omitted, the cache will be dynamically sized based on\n   * the current viewport.\n   */\n  maxTileCacheSize?: number,\n\n  /**\n   * If `true`, multiple copies of the world\n   * will be rendered, when zoomed out\n   */\n  renderWorldCopies?: boolean,\n\n  /**\n   * If specified, defines a CSS font-family for locally overriding\n   * generation of glyphs in the 'CJK Unified Ideographs' and\n   * 'Hangul Syllables' ranges. In these ranges, font settings from the\n   * map's style will be ignored, except for font-weight keywords\n   * (light/regular/medium/bold). The purpose of this option is to avoid\n   * bandwidth-intensive glyph server requests.\n   * (see https://www.mapbox.com/mapbox-gl-js/example/local-ideographs )\n   */\n  localIdeographFontFamily?: boolean,\n\n  /**\n   * A callback run before the Map makes a request for an external URL.\n   * The callback can be used to modify the url, set headers, or set the\n   * credentials property for cross-origin requests. Expected to return\n   * an object with a  url property and optionally  headers and\n   * credentials properties.\n   */\n  transformRequest?: (\n    url: string,\n    resourceType: string\n  ) => { url: string, headers?: Object, credentials?: string },\n\n  /**\n   * If true, Resource Timing API information will be collected for\n   * requests made by GeoJSON and Vector Tile web workers (this information\n   * is normally inaccessible from the main Javascript thread). Information\n   * will be returned in a resourceTiming property of relevant data events.\n   */\n  collectResourceTiming?: boolean,\n\n  /**\n   * `onViewportChange` callback is fired when the user interacted with the\n   * map. The object passed to the callback contains viewport properties\n   * such as `longitude`, `latitude`, `zoom` etc.\n   */\n  onViewportChange?: (viewport: Viewport) => void,\n\n  /**\n   * Map method that will be called after new viewport props are received.\n   */\n  viewportChangeMethod?: ViewportChangeMethod,\n\n  /**\n   * Options common to map movement methods that involve animation,\n   * controlling the duration and easing function of the animation.\n   * This options will be passed to the `viewportChangeMethod` call.\n   * (see https://docs.mapbox.com/mapbox-gl-js/api/#animationoptions)\n   */\n  viewportChangeOptions?: AnimationOptions,\n\n  /** The onLoad callback for the map */\n  onLoad?: Function,\n\n  /** Map cursor style as CSS value */\n  cursorStyle?: string\n};\n\ntype State = {\n  loaded: boolean\n};\n\nclass MapGL extends PureComponent<Props, State> {\n  _map: MapboxMap;\n\n  _container: { current: null | ElementRef<'div'> };\n\n  _onViewportChange: (event: ViewportChangeEvent) => void;\n\n  static displayName = 'MapGL';\n\n  static defaultProps = {\n    children: null,\n    className: null,\n    style: null,\n    mapStyle: 'mapbox://styles/mapbox/light-v8',\n    accessToken: null,\n    bearing: 0,\n    pitch: 0,\n    minZoom: 0,\n    maxZoom: 22,\n    maxBounds: null,\n    hash: false,\n    bearingSnap: 7,\n    pitchWithRotate: true,\n    attributionControl: true,\n    logoPosition: 'bottom-left',\n    failIfMajorPerformanceCaveat: false,\n    preserveDrawingBuffer: false,\n    refreshExpiredTiles: true,\n    boxZoom: true,\n    scrollZoom: true,\n    dragRotate: true,\n    dragPan: true,\n    keyboard: true,\n    doubleClickZoom: true,\n    trackResize: true,\n    renderWorldCopies: true,\n    maxTileCacheSize: null,\n    onViewportChange: null,\n    onLoad: null,\n    localIdeographFontFamily: null,\n    transformRequest: null,\n    collectResourceTiming: false,\n    cursorStyle: null,\n    viewportChangeMethod: jumpTo,\n    viewportChangeOptions: null\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    if (mapboxgl) {\n      mapboxgl.accessToken = props.accessToken;\n    }\n\n    this._container = createRef();\n  }\n\n  state = {\n    loaded: false\n  };\n\n  componentDidMount() {\n    if (!mapboxgl) {\n      return;\n    }\n\n    const container = this._container.current;\n\n    const map: MapboxMap = new mapboxgl.Map({\n      container,\n      style: this.props.mapStyle,\n      interactive: !!this.props.onViewportChange,\n      center: [this.props.longitude, this.props.latitude],\n      zoom: this.props.zoom,\n      pitch: this.props.pitch,\n      bearing: this.props.bearing,\n      minZoom: this.props.minZoom,\n      maxZoom: this.props.maxZoom,\n      hash: this.props.hash,\n      bearingSnap: this.props.bearingSnap,\n      pitchWithRotate: this.props.pitchWithRotate,\n      attributionControl: this.props.attributionControl,\n      logoPosition: this.props.logoPosition,\n      failIfMajorPerformanceCaveat: this.props.failIfMajorPerformanceCaveat,\n      preserveDrawingBuffer: this.props.preserveDrawingBuffer,\n      refreshExpiredTiles: this.props.refreshExpiredTiles,\n      maxBounds: this.props.maxBounds,\n      scrollZoom: this.props.scrollZoom,\n      boxZoom: this.props.boxZoom,\n      dragRotate: this.props.dragRotate,\n      dragPan: this.props.dragPan,\n      keyboard: this.props.keyboard,\n      doubleClickZoom: this.props.doubleClickZoom,\n      trackResize: this.props.trackResize,\n      renderWorldCopies: this.props.renderWorldCopies,\n      maxTileCacheSize: this.props.maxTileCacheSize,\n      localIdeographFontFamily: this.props.localIdeographFontFamily,\n      transformRequest: this.props.transformRequest,\n      collectResourceTiming: this.props.collectResourceTiming\n    });\n\n    this._map = map;\n\n    map.on('styledata', () => this.setState({ loaded: true }));\n\n    map.once('load', () => {\n      this.setState({ loaded: true }, this.props.onLoad);\n    });\n\n    if (this.props.onViewportChange) {\n      map.on('dragend', this._onViewportChange);\n      map.on('zoomend', this._onViewportChange);\n      map.on('rotateend', this._onViewportChange);\n      map.on('pitchend', this._onViewportChange);\n      map.on('boxzoomend', this._onViewportChange);\n    }\n\n    events.forEach((event) => {\n      const propName = `on${capitalizeFirstLetter(event)}`;\n      if (this.props[propName]) {\n        map.on(event, this.props[propName]);\n      }\n    });\n\n    if (this.props.cursorStyle) {\n      map.getCanvas().style.cursor = this.props.cursorStyle;\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this._updateMapViewport(prevProps, this.props);\n    this._updateMapStyle(prevProps, this.props);\n\n    if (!prevProps.cursorStyle !== this.props.cursorStyle) {\n      this._map.getCanvas().style.cursor = this.props.cursorStyle;\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._map) {\n      this._map.remove();\n    }\n  }\n\n  // External apps can access map this way\n  getMap() {\n    return this._map;\n  }\n\n  /**\n   * Update Map style from newProps\n   *\n   * @private\n   * @param {Props} prevProps\n   * @param {Props} newProps\n   */\n  _updateMapStyle(prevProps: Props, newProps: Props): void {\n    const newMapStyle = newProps.mapStyle;\n    const prevMapStyle = prevProps.mapStyle;\n\n    if (newMapStyle !== prevMapStyle) {\n      this.setState({ loaded: false }, () => this._map.setStyle(newMapStyle));\n    }\n  }\n\n  /**\n   * Update Map viewport from newProps\n   *\n   * @private\n   * @param {Props} newProps\n   */\n  _updateMapViewport(prevProps: Props, newProps: Props): void {\n    const map: MapboxMap = this._map;\n    const center = map.getCenter();\n\n    const viewportChanged =\n      (newProps.latitude !== prevProps.latitude &&\n        newProps.latitude !== center.lat) ||\n      (newProps.longitude !== prevProps.longitude &&\n        newProps.longitude !== center.lng) ||\n      (newProps.zoom !== prevProps.zoom && newProps.zoom !== map.getZoom()) ||\n      (newProps.pitch !== prevProps.pitch &&\n        newProps.pitch !== map.getPitch()) ||\n      (newProps.bearing !== prevProps.bearing &&\n        newProps.bearing !== map.getBearing());\n\n    if (!viewportChanged) {\n      return;\n    }\n\n    const viewport = {\n      center: [newProps.longitude, newProps.latitude],\n      zoom: newProps.zoom,\n      pitch: newProps.pitch,\n      bearing: newProps.bearing\n    };\n\n    const { viewportChangeMethod, viewportChangeOptions } = this.props;\n    const options = { ...viewportChangeOptions, ...viewport };\n\n    switch (viewportChangeMethod) {\n      case flyTo:\n        map.flyTo(options);\n        break;\n      case jumpTo:\n        map.jumpTo(options);\n        break;\n      case easeTo:\n        map.easeTo(options);\n        break;\n      default:\n        throw new Error('Unknown viewport change method');\n    }\n  }\n\n  /**\n   * fires `onViewportChange` callback when the user interacted with the map.\n   *\n   * @private\n   * @param {ViewportChangeEvent} event\n   */\n  _onViewportChange = (event: ViewportChangeEvent): void => {\n    if (!event.originalEvent) {\n      return;\n    }\n\n    const map = this._map;\n\n    const { lng, lat } = map.getCenter();\n    const zoom = map.getZoom();\n    const pitch = map.getPitch();\n    const bearing = map.getBearing();\n\n    const viewport: Viewport = {\n      latitude: lat,\n      longitude: lng,\n      zoom,\n      pitch,\n      bearing\n    };\n\n    // $FlowFixMe\n    this.props.onViewportChange(viewport);\n  };\n\n  render() {\n    const { loaded } = this.state;\n    const { className, style } = this.props;\n\n    const children = this.props.children\n      ? normalizeChildren(this.props.children)\n      : null;\n\n    return createElement(\n      MapContext.Provider,\n      { value: this._map },\n      createElement(\n        'div',\n        {\n          ref: this._container,\n          style,\n          className\n        },\n        loaded && children\n      )\n    );\n  }\n}\n\nexport default MapGL;\n","// @flow\nimport type { Props } from '../components/Source';\n\nexport default (props: Props) => {\n  switch (props.type) {\n    case 'vector':\n      return { type: 'vector', ...props };\n    case 'raster':\n      return { type: 'raster', ...props };\n    case 'raster-dem':\n      return { type: 'raster-dem', ...props };\n    case 'geojson':\n      return { type: 'geojson', ...props };\n    case 'video':\n      return { type: 'video', ...props };\n    case 'image':\n      return { type: 'image', ...props };\n    default:\n      throw new Error(`Unknown type for '${props.id}' Source`);\n  }\n};\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type { ChildrenArray, Element } from 'react';\nimport type {\n  SourceSpecification,\n  VectorSourceSpecification,\n  GeoJSONSourceSpecification\n} from 'mapbox-gl/src/style-spec/types';\n\nimport MapContext from '../MapContext';\nimport Layer from '../Layer';\nimport validateSource from '../../utils/validateSource';\nimport normalizeChildren from '../../utils/normalizeChildren';\n\nexport type Props = {\n  /** Mapbox GL Source */\n  ...SourceSpecification,\n\n  /** Mapbox GL Source id */\n  id: string,\n\n  /** Layers */\n  children?: ChildrenArray<Element<typeof Layer>>\n};\n\ntype State = {\n  loaded: boolean\n};\n\nclass Source extends PureComponent<Props, State> {\n  _map: MapboxMap;\n\n  static displayName = 'Source';\n\n  state = {\n    loaded: false\n  };\n\n  componentDidMount() {\n    const { id, children, ...source } = validateSource(this.props);\n    this._map.addSource(id, source);\n    this._map.on('sourcedata', this._onSourceData);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const {\n      id: prevId,\n      children: prevChildren,\n      ...prevSource\n    } = validateSource(prevProps);\n    const { id, children, ...source } = validateSource(this.props);\n\n    if (id !== prevId || source.type !== prevSource.type) {\n      this._map.removeSource(prevId);\n      this._map.addSource(id, source);\n      return;\n    }\n\n    if (source.type === 'geojson' && prevSource.type === 'geojson') {\n      this._updateGeoJSONSource(id, prevSource, source);\n      return;\n    }\n\n    if (source.type === 'vector' && prevSource.type === 'vector') {\n      this._updateVectorSource(id, prevSource, source);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._removeSource();\n  }\n\n  _onSourceData = () => {\n    if (!this._map.isSourceLoaded(this.props.id)) {\n      return;\n    }\n\n    this._map.off('sourcedata', this._onSourceData);\n    this.setState({ loaded: true });\n  };\n\n  _updateGeoJSONSource = (\n    id: string,\n    prevSource: GeoJSONSourceSpecification,\n    newSource: GeoJSONSourceSpecification\n  ) => {\n    if (newSource.data !== prevSource.data) {\n      this._map.getSource(id).setData(newSource.data);\n    }\n  };\n\n  // https://github.com/mapbox/mapbox-gl-js/pull/8048\n  _updateVectorSource = (\n    id: string,\n    prevSource: VectorSourceSpecification,\n    newSource: VectorSourceSpecification\n  ) => {\n    const source = this._map.getSource(id);\n\n    /* eslint-disable no-underscore-dangle */\n    if (source._tileJSONRequest) {\n      source._tileJSONRequest.cancel();\n    }\n\n    source.url = newSource.url;\n    source.scheme = newSource.scheme;\n    source._options = { ...source._options, ...newSource };\n    /* eslint-enable no-underscore-dangle */\n\n    const sourceCache = this._map.style.sourceCaches[id];\n    if (sourceCache) {\n      sourceCache.clearTiles();\n    }\n\n    source.load();\n  };\n\n  _removeSource = () => {\n    const { id } = this.props;\n    if (this._map.getSource(id)) {\n      const { layers } = this._map.getStyle();\n      if (layers) {\n        layers.forEach((layer) => {\n          if (layer.source === id) {\n            this._map.removeLayer(layer.id);\n          }\n        });\n      }\n\n      this._map.removeSource(id);\n    }\n  };\n\n  render() {\n    const { loaded } = this.state;\n\n    const children = this.props.children\n      ? // $FlowFixMe\n        normalizeChildren(this.props.children)\n      : null;\n\n    return createElement(MapContext.Consumer, {}, (map: ?MapboxMap) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return loaded && children;\n    });\n  }\n}\n\nexport default Source;\n","// @flow\n\nimport { createPortal } from 'react-dom';\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxPopup from 'mapbox-gl/src/ui/popup';\nimport type MapboxLngLatBoundsLike from 'mapbox-gl/src/geo/lng_lat_bounds';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /** Popup content. */\n  children: React$Node,\n\n  /** The longitude of the center of the popup. */\n  longitude: number,\n\n  /** The latitude of the center of the popup. */\n  latitude: number,\n\n  /*\n   * If true, a close button will appear\n   * in the top right corner of the popup.\n   */\n  closeButton?: boolean,\n\n  /** If true, the popup will closed when the map is clicked. */\n  closeOnClick?: boolean,\n\n  /** The onClose callback is fired when the popup closed. */\n  onClose?: Function,\n\n  /*\n   * A string indicating the part of the Popup\n   * that should be positioned closest to the coordinate.\n   * */\n  anchor?:\n    | 'top'\n    | 'bottom'\n    | 'left'\n    | 'right'\n    | 'top-left'\n    | 'top-right'\n    | 'bottom-left'\n    | 'bottom-right',\n\n  /**\n   * The offset in pixels as a `PointLike` object to apply\n   * relative to the element's center. Negatives indicate left and up.\n   */\n  offset?: MapboxLngLatBoundsLike\n};\n\nclass Popup extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _el: HTMLDivElement;\n\n  _popup: MapboxPopup;\n\n  static displayName = 'Popup';\n\n  static defaultProps = {\n    closeButton: true,\n    closeOnClick: true,\n    onClose: null,\n    anchor: null,\n    offset: null\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this._el = document.createElement('div');\n  }\n\n  componentDidMount() {\n    const {\n      longitude,\n      latitude,\n      offset,\n      closeButton,\n      closeOnClick,\n      onClose,\n      anchor\n    } = this.props;\n\n    this._popup = new mapboxgl.Popup({\n      offset,\n      closeButton,\n      closeOnClick,\n      anchor\n    });\n\n    this._popup.setDOMContent(this._el);\n    this._popup.setLngLat([longitude, latitude]).addTo(this._map);\n\n    if (onClose) {\n      this._popup.on('close', onClose);\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const positionChanged =\n      prevProps.latitude !== this.props.latitude ||\n      prevProps.longitude !== this.props.longitude;\n\n    if (positionChanged) {\n      this._popup.setLngLat([this.props.longitude, this.props.latitude]);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._popup.remove();\n  }\n\n  getPopup() {\n    return this._popup;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return createPortal(this.props.children, this._el);\n    });\n  }\n}\n\nexport default Popup;\n","// @flow\n\nimport { createPortal } from 'react-dom';\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxMarker from 'mapbox-gl/src/ui/marker';\nimport type LngLat from 'mapbox-gl/src/geo/lng_lat';\nimport type { PointLike } from '@mapbox/point-geometry';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /** Marker content */\n  children: React$Node,\n\n  /** The longitude of the center of the marker. */\n  longitude: number,\n\n  /** The latitude of the center of the marker. */\n  latitude: number,\n\n  /**\n   * The offset in pixels as a `PointLike` object to apply\n   * relative to the element's center. Negatives indicate left and up.\n   */\n  offset?: PointLike,\n\n  /**\n   * Boolean indicating whether or not a marker is able to be dragged\n   * to a new position on the map.\n   */\n  draggable?: boolean,\n\n  /** Fired when the marker is finished being dragged */\n  onDragEnd?: (lngLat: LngLat) => any,\n\n  /** Fired when the marker is finished being dragged */\n  onDragStart?: (lngLat: LngLat) => any,\n\n  /** Fired when the marker is dragged */\n  onDrag?: (lngLat: LngLat) => any\n};\n\nclass Marker extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _el: HTMLDivElement;\n\n  _marker: MapboxMarker;\n\n  static displayName = 'Marker';\n\n  static defaultProps = {\n    offset: null,\n    draggable: false\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this._el = document.createElement('div');\n  }\n\n  componentDidMount() {\n    const {\n      longitude,\n      latitude,\n      offset,\n      draggable,\n      onDragEnd,\n      onDragStart,\n      onDrag\n    } = this.props;\n\n    this._marker = new mapboxgl.Marker(this._el, {\n      draggable,\n      offset\n    });\n\n    this._marker.setLngLat([longitude, latitude]).addTo(this._map);\n\n    if (onDragEnd) {\n      this._marker.on('dragend', this._onDragEnd);\n    }\n\n    if (onDragStart) {\n      this._marker.on('dragstart', this._onDragStart);\n    }\n\n    if (onDrag) {\n      this._marker.on('drag', this._onDrag);\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const positionChanged =\n      prevProps.latitude !== this.props.latitude ||\n      prevProps.longitude !== this.props.longitude;\n\n    if (positionChanged) {\n      this._marker.setLngLat([this.props.longitude, this.props.latitude]);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._marker.remove();\n  }\n\n  getMarker() {\n    return this._marker;\n  }\n\n  _onDragEnd = (): void => {\n    // $FlowFixMe\n    this.props.onDragEnd(this._marker.getLngLat());\n  };\n\n  _onDragStart = (): void => {\n    // $FlowFixMe\n    this.props.onDragStart(this._marker.getLngLat());\n  };\n\n  _onDrag = (): void => {\n    // $FlowFixMe\n    this.props.onDrag(this._marker.getLngLat());\n  };\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return createPortal(this.props.children, this._el);\n    });\n  }\n}\n\nexport default Marker;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\n\nimport MapContext from '../MapContext';\n\ntype Props = {\n  /** Unique id of the feature. */\n  id: string | number,\n\n  /** The Id of the vector source or GeoJSON source for the feature. */\n  source: string,\n\n  /** For vector tile sources, the sourceLayer is required. */\n  sourceLayer: string,\n\n  /** A set of key-value pairs. The values should be valid JSON types. */\n  state: Object\n};\n\n/**\n * A `FeatureState` component sets the state of a feature.\n */\nclass FeatureState extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const { id, source, sourceLayer, state } = this.props;\n    map.setFeatureState({ id, source, sourceLayer }, state);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const map = this._map;\n    const { id, source, sourceLayer, state } = this.props;\n\n    if (\n      id !== prevProps.id ||\n      source !== prevProps.source ||\n      sourceLayer !== prevProps.sourceLayer ||\n      state !== prevProps.state\n    ) {\n      map.removeFeatureState({\n        id: prevProps.id,\n        source: prevProps.source,\n        sourceLayer: prevProps.sourceLayer\n      });\n\n      map.setFeatureState({ id, source, sourceLayer }, state);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    const { id, source, sourceLayer } = this.props;\n    this._map.removeFeatureState({ id, source, sourceLayer });\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n\n      return null;\n    });\n  }\n}\n\nexport default FeatureState;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxAttributionControl from 'mapbox-gl/src/ui/control/attribution_control';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /**\n   * If `true` force a compact attribution that shows the full\n   * attribution on mouse hover, or if  false force the full attribution\n   * control. The default is a responsive attribution that collapses when\n   * the map is less than 640 pixels wide.\n   */\n  compact: boolean,\n\n  /* String or strings to show in addition to any other attributions. */\n  customAttribution: string | Array<string>,\n\n  /* A string representing the position of the control on the map. */\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n};\n\n/**\n * An `AttributionControl` control presents the map's attribution information.\n */\nclass AttributionControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxAttributionControl;\n\n  static defaultProps = {\n    position: 'bottom-right'\n  };\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const { compact, customAttribution, position } = this.props;\n\n    const control: MapboxAttributionControl = new mapboxgl.AttributionControl({\n      compact,\n      customAttribution\n    });\n\n    map.addControl(control, position);\n    this._control = control;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default AttributionControl;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxFullscreenControl from 'mapbox-gl/src/ui/control/fullscreen_control';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /**\n   * container is the compatible DOM element which should be\n   * made full screen. By default, the map container element\n   * will be made full screen.\n   */\n  container: string,\n\n  /* A string representing the position of the control on the map. */\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n};\n\n/**\n * A `FullscreenControl` control contains a button for toggling the map in\n * and out of fullscreen mode.\n */\nclass FullscreenControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxFullscreenControl;\n\n  static defaultProps = {\n    position: 'top-right'\n  };\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const { container, position } = this.props;\n\n    const control: MapboxFullscreenControl = new mapboxgl.FullscreenControl({\n      container\n    });\n\n    map.addControl(control, position);\n    this._control = control;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default FullscreenControl;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxGeolocateControl from 'mapbox-gl/src/ui/control/geolocate_control';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /* A Geolocation API PositionOptions object. */\n  positionOptions: PositionOptions,\n\n  /**\n   * A `fitBounds` options object to use when the map is\n   * panned and zoomed to the user's location.\n   */\n  fitBoundsOptions: Object,\n\n  /**\n   * If `true` the Geolocate Control becomes a toggle button and when active\n   * the map will receive updates to the user's location as it changes.\n   */\n  trackUserLocation: boolean,\n\n  /**\n   * By default a dot will be shown on the map at the user's location.\n   * Set to `false` to disable.\n   */\n  showUserLocation: boolean,\n\n  /* A string representing the position of the control on the map. */\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right',\n\n  /**\n   * Fired when the Geolocate Control changes to the background state.\n   */\n  onTrackUserLocationEnd?: Function,\n\n  /**\n   * Fired when the Geolocate Control changes to the active lock state,\n   */\n  onTrackUserLocationStart?: Function,\n\n  /**\n   * Fired on each Geolocation API position update which returned as an error.\n   */\n  onError?: Function,\n\n  /**\n   * Fired on each Geolocation API position update which returned as success.\n   */\n  onGeolocate?: Function\n};\n\n/**\n * A `GeolocateControl` control provides a button that uses the browser's\n * geolocation API to locate the user on the map.\n */\nclass GeolocateControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxGeolocateControl;\n\n  static defaultProps = {\n    positionOptions: { enableHighAccuracy: false, timeout: 6000 },\n    fitBoundsOptions: { maxZoom: 15 },\n    trackUserLocation: false,\n    showUserLocation: true\n  };\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const {\n      positionOptions,\n      fitBoundsOptions,\n      trackUserLocation,\n      showUserLocation,\n      position,\n      onTrackUserLocationEnd,\n      onTrackUserLocationStart,\n      onError,\n      onGeolocate\n    } = this.props;\n\n    const control: MapboxGeolocateControl = new mapboxgl.GeolocateControl({\n      positionOptions,\n      fitBoundsOptions,\n      trackUserLocation,\n      showUserLocation\n    });\n\n    if (onTrackUserLocationEnd) {\n      control.on('trackuserlocationend', onTrackUserLocationEnd);\n    }\n\n    if (onTrackUserLocationStart) {\n      control.on('trackuserlocationstart', onTrackUserLocationStart);\n    }\n\n    if (onError) {\n      control.on('error', onError);\n    }\n\n    if (onGeolocate) {\n      control.on('geolocate', onGeolocate);\n    }\n\n    map.addControl(control, position);\n    this._control = control;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default GeolocateControl;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxNavigationControl from 'mapbox-gl/src/ui/control/navigation_control';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /* If true the compass button is included. */\n  showCompass: boolean,\n\n  /* If true the zoom-in and zoom-out buttons are included. */\n  showZoom: boolean,\n\n  /* A string representing the position of the control on the map. */\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n};\n\n/**\n * A `NavigationControl` control contains zoom buttons and a compass.\n */\nclass NavigationControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxNavigationControl;\n\n  static defaultProps = {\n    position: 'top-right'\n  };\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const { showCompass, showZoom, position } = this.props;\n\n    const control: MapboxNavigationControl = new mapboxgl.NavigationControl({\n      showCompass,\n      showZoom\n    });\n\n    map.addControl(control, position);\n    this._control = control;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default NavigationControl;\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxScaleControl from 'mapbox-gl/src/ui/control/scale_control';\n\nimport MapContext from '../MapContext';\nimport mapboxgl from '../../utils/mapbox-gl';\n\ntype Props = {\n  /* The maximum length of the scale control in pixels. */\n  maxWidth: number,\n\n  /* Unit of the distance. */\n  unit: 'imperial' | 'metric' | 'nautical',\n\n  /* A string representing the position of the control on the map. */\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n};\n\n/**\n * A `ScaleControl` control displays the ratio of a distance on the map\n * to the corresponding distance on the ground.\n */\nclass ScaleControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxScaleControl;\n\n  static defaultProps = {\n    position: 'bottom-right',\n    unit: 'metric'\n  };\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const { maxWidth, unit, position } = this.props;\n\n    const control: MapboxScaleControl = new mapboxgl.ScaleControl({\n      maxWidth,\n      unit\n    });\n\n    map.addControl(control, position);\n    this._control = control;\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default ScaleControl;\n","/**\n * Create a new [Mapbox GL JS plugin](https://www.mapbox.com/blog/build-mapbox-gl-js-plugins/) that\n * modifies the layers of the map style to use the 'text-field' that matches the browser language.\n * @constructor\n * @param {object} options - Options to configure the plugin.\n * @param {string[]} [options.supportedLanguages] - List of supported languages\n * @param {Function} [options.languageTransform] - Custom style transformation to apply\n * @param {RegExp} [options.languageField=/^\\{name/] - RegExp to match if a text-field is a language field\n * @param {Function} [options.getLanguageField] - Given a language choose the field in the vector tiles\n * @param {string} [options.languageSource] - Name of the source that contains the different languages.\n * @param {string} [options.defaultLanguage] - Name of the default language to initialize style after loading.\n * @param {string[]} [options.excludedLayerIds] - Name of the layers that should be excluded from translation.\n */\nfunction MapboxLanguage(options) {\n  options = Object.assign({}, options);\n  if (!(this instanceof MapboxLanguage)) {\n    throw new Error('MapboxLanguage needs to be called with the new keyword');\n  }\n\n  this.setLanguage = this.setLanguage.bind(this);\n  this._initialStyleUpdate = this._initialStyleUpdate.bind(this);\n\n  this._defaultLanguage = options.defaultLanguage;\n  this._isLanguageField = options.languageField || /^\\{name/;\n  this._getLanguageField = options.getLanguageField || function nameField(language) {\n    return language === 'mul' ? '{name}' : '{name_' + language + '}';\n  };\n  this._languageSource = options.languageSource || null;\n  this._languageTransform = options.languageTransform || function (style, language) {\n    if (language === 'ar') {\n      return noSpacing(style);\n    } else {\n      return standardSpacing(style);\n    }\n  };\n  this._excludedLayerIds = options.excludedLayerIds || [];\n  this.supportedLanguages = options.supportedLanguages || ['ar', 'en', 'es', 'fr', 'de', 'ja', 'ko', 'mul', 'pt', 'ru', 'zh'];\n}\n\nfunction standardSpacing(style) {\n  var changedLayers = style.layers.map(function (layer) {\n    if (!(layer.layout || {})['text-field']) return layer;\n    var spacing = 0;\n    if (layer['source-layer'] === 'state_label') {\n      spacing = 0.15;\n    }\n    if (layer['source-layer'] === 'marine_label') {\n      if (/-lg/.test(layer.id)) {\n        spacing = 0.25;\n      }\n      if (/-md/.test(layer.id)) {\n        spacing = 0.15;\n      }\n      if (/-sm/.test(layer.id)) {\n        spacing = 0.1;\n      }\n    }\n    if (layer['source-layer'] === 'place_label') {\n      if (/-suburb/.test(layer.id)) {\n        spacing = 0.15;\n      }\n      if (/-neighbour/.test(layer.id)) {\n        spacing = 0.1;\n      }\n      if (/-islet/.test(layer.id)) {\n        spacing = 0.01;\n      }\n    }\n    if (layer['source-layer'] === 'airport_label') {\n      spacing = 0.01;\n    }\n    if (layer['source-layer'] === 'rail_station_label') {\n      spacing = 0.01;\n    }\n    if (layer['source-layer'] === 'poi_label') {\n      if (/-scalerank/.test(layer.id)) {\n        spacing = 0.01;\n      }\n    }\n    if (layer['source-layer'] === 'road_label') {\n      if (/-label-/.test(layer.id)) {\n        spacing = 0.01;\n      }\n      if (/-shields/.test(layer.id)) {\n        spacing = 0.05;\n      }\n    }\n    return Object.assign({}, layer, {\n      layout: Object.assign({}, layer.layout, {\n        'text-letter-spacing': spacing\n      })\n    });\n  });\n\n  return Object.assign({}, style, {\n    layers: changedLayers\n  });\n}\n\nfunction noSpacing(style) {\n  var changedLayers = style.layers.map(function (layer) {\n    if (!(layer.layout || {})['text-field']) return layer;\n    var spacing = 0;\n    return Object.assign({}, layer, {\n      layout: Object.assign({}, layer.layout, {\n        'text-letter-spacing': spacing\n      })\n    });\n  });\n\n  return Object.assign({}, style, {\n    layers: changedLayers\n  });\n}\n\nfunction isNameStringField(isLangField, property) {\n  return typeof property === 'string' && isLangField.test(property);\n}\n\nfunction isNameFunctionField(isLangField, property) {\n  return property.stops && property.stops.filter(function (stop) {\n    return isLangField.test(stop[1]);\n  }).length > 0;\n}\n\nfunction adaptPropertyLanguage(isLangField, property, languageFieldName) {\n  if (isNameStringField(isLangField, property)) return languageFieldName;\n  if (isNameFunctionField(isLangField, property)) {\n    var newStops = property.stops.map(function (stop) {\n      if (isLangField.test(stop[1])) {\n        return [stop[0], languageFieldName];\n      }\n      return stop;\n    });\n    return Object.assign({}, property, {\n      stops: newStops\n    });\n  }\n  return property;\n}\n\nfunction changeLayerTextProperty(isLangField, layer, languageFieldName, excludedLayerIds) {\n  if (layer.layout && layer.layout['text-field'] && excludedLayerIds.indexOf(layer.id) === -1) {\n    return Object.assign({}, layer, {\n      layout: Object.assign({}, layer.layout, {\n        'text-field': adaptPropertyLanguage(isLangField, layer.layout['text-field'], languageFieldName)\n      })\n    });\n  }\n  return layer;\n}\n\nfunction findStreetsSource(style) {\n  var sources = Object.keys(style.sources).filter(function (sourceName) {\n    var source = style.sources[sourceName];\n    return /mapbox-streets-v\\d/.test(source.url);\n  });\n  return sources[0];\n}\n\n/**\n * Explicitly change the language for a style.\n * @param {object} style - Mapbox GL style to modify\n * @param {string} language - The language iso code\n * @returns {object} the modified style\n */\nMapboxLanguage.prototype.setLanguage = function (style, language) {\n  if (this.supportedLanguages.indexOf(language) < 0) throw new Error('Language ' + language + ' is not supported');\n  var streetsSource = this._languageSource || findStreetsSource(style);\n  if (!streetsSource) return style;\n\n  var field = this._getLanguageField(language);\n  var isLangField = this._isLanguageField;\n  var excludedLayerIds = this._excludedLayerIds;\n  var changedLayers = style.layers.map(function (layer) {\n    if (layer.source === streetsSource) return changeLayerTextProperty(isLangField, layer, field, excludedLayerIds);\n    return layer;\n  });\n\n  var languageStyle = Object.assign({}, style, {\n    layers: changedLayers\n  });\n\n  return this._languageTransform(languageStyle, language);\n};\n\nMapboxLanguage.prototype._initialStyleUpdate = function () {\n  var style = this._map.getStyle();\n  var language = this._defaultLanguage || browserLanguage(this.supportedLanguages);\n\n  // We only update the style once\n  this._map.off('styledata', this._initialStyleUpdate);\n  this._map.setStyle(this.setLanguage(style, language));\n};\n\nfunction browserLanguage(supportedLanguages) {\n  var language = navigator.languages ? navigator.languages[0] : (navigator.language || navigator.userLanguage);\n  var parts = language.split('-');\n  var languageCode = language;\n  if (parts.length > 1) {\n    languageCode = parts[0];\n  }\n  if (supportedLanguages.indexOf(languageCode) > -1) {\n    return languageCode;\n  }\n  return null;\n}\n\nMapboxLanguage.prototype.onAdd = function (map) {\n  this._map = map;\n  this._map.on('styledata', this._initialStyleUpdate);\n  this._container = document.createElement('div');\n  return this._container;\n};\n\nMapboxLanguage.prototype.onRemove = function () {\n  this._map.off('styledata', this._initialStyleUpdate);\n  this._map = undefined;\n};\n\nfunction ie11Polyfill() {\n  if (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      // eslint-disable-next-line no-unused-vars\n      value: function assign(target, varArgs) { // .length of function is 2\n        // eslint-disable-next-line strict\n        'use strict';\n        if (target === null) { // TypeError if undefined or null\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource !== null) { // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n}\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n  module.exports = MapboxLanguage;\n} else {\n  ie11Polyfill();\n  window.MapboxLanguage = MapboxLanguage;\n}\n","// @flow\n\nimport { PureComponent, createElement } from 'react';\nimport type MapboxMap from 'mapbox-gl/src/ui/map';\nimport type MapboxLanguageControl from '@mapbox/mapbox-gl-language/index';\n\nimport MapboxLanguage from '@mapbox/mapbox-gl-language';\nimport MapContext from '../MapContext';\n\ntype Props = {\n  /** List of supported languages */\n  supportedLanguages?: string[],\n\n  /** Custom style transformation to apply */\n  languageTransform?: Function,\n\n  /**\n   * RegExp to match if a text-field is a language field\n   * (optional, default /^\\{name/)\n   */\n  languageField?: RegExp,\n\n  /** Given a language choose the field in the vector tiles */\n  getLanguageField?: Function,\n\n  /** Name of the source that contains the different languages. */\n  languageSource?: string,\n\n  /** Name of the default language to initialize style after loading. */\n  defaultLanguage?: string,\n\n  /** Name of the language to set */\n  language?: string\n};\n\n/**\n * Adds support for switching the language of your map style.\n */\nclass LanguageControl extends PureComponent<Props> {\n  _map: MapboxMap;\n\n  _control: MapboxLanguageControl;\n\n  static defaultProps = {};\n\n  componentDidMount() {\n    const map: MapboxMap = this._map;\n    const {\n      supportedLanguages,\n      languageTransform,\n      languageField,\n      getLanguageField,\n      languageSource,\n      defaultLanguage\n    } = this.props;\n\n    const control: MapboxLanguageControl = new MapboxLanguage({\n      supportedLanguages,\n      languageTransform,\n      languageField,\n      getLanguageField,\n      languageSource,\n      defaultLanguage\n    });\n\n    map.addControl(control);\n    this._control = control;\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.language !== this.props.language) {\n      this._setLanguage();\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this._map || !this._map.getStyle()) {\n      return;\n    }\n\n    this._map.removeControl(this._control);\n  }\n\n  _setLanguage = () => {\n    const { language } = this.props;\n    const map = this._map;\n    const control = this._control;\n\n    if (language) {\n      map.setStyle(control.setLanguage(map.getStyle(), language));\n    }\n  };\n\n  getControl() {\n    return this._control;\n  }\n\n  render() {\n    return createElement(MapContext.Consumer, {}, (map) => {\n      if (map) {\n        this._map = map;\n      }\n      return null;\n    });\n  }\n}\n\nexport default LanguageControl;\n"],"names":["MapContext","createContext","mapboxgl","Object","prototype","toString","call","global","process","browser","require","diff","newProps","prevProps","keys","Set","_toConsumableArray","reduce","acc","key","value","push","queryRenderedFeatures","map","layerId","position","radius","parameters","layers","bbox","eventListeners","Layer","props","event","point","x","y","features","_this","_map","_id","onClick","onHover","onEnter","onLeave","id","componentDidMount","this","before","layer","getLayer","addLayer","on","_onClick","_onHover","_onEnter","_onLeave","componentDidUpdate","moveLayer","paint","forEach","setPaintProperty","_this2","layout","setLayoutProperty","filter","setFilter","undefined","propName","eventName","handlerName","off","componentWillUnmount","getStyle","_this3","removeLayer","render","createElement","Consumer","_this4","PureComponent","CustomLayer","normalizeChildren","children","Children","toArray","Boolean","child","index","previousLayerIndex","type","currentLayerId","getLayerId","previousLayer","previousLayerWithBefore","cloneElement","module","string","charAt","toUpperCase","slice","MapGL","loaded","originalEvent","getCenter","lng","viewport","latitude","lat","longitude","zoom","getZoom","pitch","getPitch","bearing","getBearing","onViewportChange","accessToken","_container","createRef","container","current","Map","style","mapStyle","interactive","center","minZoom","maxZoom","hash","bearingSnap","pitchWithRotate","attributionControl","logoPosition","failIfMajorPerformanceCaveat","preserveDrawingBuffer","refreshExpiredTiles","maxBounds","scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","trackResize","renderWorldCopies","maxTileCacheSize","localIdeographFontFamily","transformRequest","collectResourceTiming","setState","once","onLoad","_onViewportChange","events","capitalizeFirstLetter","cursorStyle","getCanvas","cursor","_updateMapViewport","_updateMapStyle","remove","getMap","newMapStyle","prevMapStyle","setStyle","viewportChangeMethod","options","viewportChangeOptions","flyTo","jumpTo","easeTo","Error","state","className","Provider","ref","Source","isSourceLoaded","_onSourceData","prevSource","newSource","data","getSource","setData","source","_tileJSONRequest","cancel","url","scheme","_options","sourceCache","sourceCaches","clearTiles","load","removeSource","validateSource","addSource","prevId","_updateVectorSource","_updateGeoJSONSource","_removeSource","Popup","_el","document","offset","closeButton","closeOnClick","onClose","anchor","_popup","setDOMContent","setLngLat","addTo","getPopup","createPortal","Marker","onDragEnd","_marker","getLngLat","onDragStart","onDrag","draggable","_onDragEnd","_onDragStart","_onDrag","getMarker","FeatureState","sourceLayer","setFeatureState","removeFeatureState","AttributionControl","compact","customAttribution","control","addControl","_control","removeControl","getControl","FullscreenControl","GeolocateControl","positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation","onTrackUserLocationEnd","onTrackUserLocationStart","onError","onGeolocate","enableHighAccuracy","timeout","NavigationControl","showCompass","showZoom","ScaleControl","maxWidth","unit","MapboxLanguage","assign","setLanguage","bind","_initialStyleUpdate","_defaultLanguage","defaultLanguage","_isLanguageField","languageField","_getLanguageField","getLanguageField","language","_languageSource","languageSource","_languageTransform","languageTransform","changedLayers","noSpacing","spacing","test","standardSpacing","_excludedLayerIds","excludedLayerIds","supportedLanguages","adaptPropertyLanguage","isLangField","property","languageFieldName","isNameStringField","stops","stop","length","isNameFunctionField","newStops","indexOf","streetsSource","sources","sourceName","findStreetsSource","field","changeLayerTextProperty","languageStyle","navigator","languages","userLanguage","parts","split","languageCode","browserLanguage","onAdd","onRemove","LanguageControl","_setLanguage"],"mappings":"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"}